function mathAdd(a,b){return-(-a-b)}function toInt(a){return 1*a}function isNumber(a){return!isNaN(parseFloat(a))&&isFinite(a)}function extractNumber(a){return toInt(a.match(/[0-9]+/))}function flash(a){a.fadeIn(100).fadeOut(300).fadeIn(300)}function getFirstKey(a){for(var b in a)return b}function getFirstValue(a){for(var b in a)return a[b]}function round(a,b){if("undefined"==typeof b)return Math.round(a);a=toInt(a);var c=Math.round(a*Math.pow(10,b),b)/Math.pow(10,b);return c.toFixed(b)}function caller(a,b){if("undefined"!=typeof b){var c=[];for(var d in arguments)0!=d&&c.push(arguments[d]);window[a].apply(this,c)}else window[a]()}function parseJson(a){var b=!0;try{var c=$.parseJSON(a)}catch(a){b=!1}return!!b&&c}function htmlDecode(a){return a=a.replace("&lt;","<"),a=a.replace("&gt;",">"),a=a.replace("&amp;","&")}function disable(){for(var a=0;a<arguments.length;a++)arguments[a].prop("disabled","disabled"),arguments[a].addClass("disabled")}function enable(){for(var a=0;a<arguments.length;a++)arguments[a].removeAttr("disabled"),arguments[a].removeClass("disabled")}function readOnly(){for(var a=0;a<arguments.length;a++)arguments[a].prop("readonly","readonly")}function unReadOnly(){for(var a=0;a<arguments.length;a++)arguments[a].removeAttr("readonly")}function time(){return Math.round((new Date).getTime()/1e3)}function militime(){return(new Date).getTime()}function rand(a,b){return Math.floor(Math.random()*(b-a+1))+a}function generateRandomNumber(){var a=Math.random(),b=a.toString();return toInt(b.replace("0.",""))}function generateRandomStr(a,b){var c=50;if("undefined"==typeof b||b?b=!0:c=80,a>c)return"";var d="",e=0,f="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",g="!#$%&()*+,-./:;<=>?@[]^_`{|}~";b||(f+=g);for(var h=f.length-1;e<a;){var i=rand(0,h),j=f.substring(i,i+1);strstr(d,j)||(d+=j,e++)}return d}function scrollToElement(a,b,c,d){var e=!1;try{e=a.offset().top}catch(a){}if(e){var f=a.offset().top;"undefined"!=typeof c&&c&&(f=mathAdd(f,c)),"undefined"!=typeof b&&b||(b=3e3),$("html, body").animate({scrollTop:f},b,function(){"undefined"!=typeof d&&caller(d,a)})}}function isVisible(a){var b=$(window).scrollTop(),c=b+$(window).height(),d=a.offset().top,e=d+a.height();return e<=c&&d>=b}function activateAjaxForm(a,b){return!!a.find("form").length&&(a.find("form").ajaxForm({target:a,error:function(){alertBox("Server Error")},success:function(c){"undefined"!=typeof b?(activateAjaxForm(a,b),caller(b)):activateAjaxForm(a)}}),void loadDefaults())}function arraysEqual(a,b){if(a===b)return!0;if(null==a||null==b)return!1;if(a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!==b[c])return!1;return!0}function strstr(a,b,c){var d=0;return a+="",d=a.indexOf(b),d!=-1&&(c?a.substr(0,d):a.slice(d))}function loadDefaults(){$('input[type="checkbox"].toggle-box').each(function(){$(this).is(":checked")?$(this).attr("rtarget")&&$("."+$(this).attr("rtarget")).addClass("hidn"):$("."+$(this).attr("target")).addClass("hidn")}),$('input[type="checkbox"].toggle-box-reverse').each(function(){$(this).is(":checked")?$("."+$(this).attr("target")).addClass("hidn"):$(this).attr("rtarget")&&$("."+$(this).attr("rtarget")).addClass("hidn")}),$("select.toggle-box").each(function(){var a=$(this).val(),b=$(this).attr("_val"),c=$(this).attr("show"),d=$(this).attr("hide");if(c)for(var e=c.split(","),f=0;f<e.length;f++){var g=$.trim(e[f]);a==b?$(g).show():$(g).hide()}if(d)for(var h=d.split(","),f=0;f<h.length;f++){var g=$.trim(h[f]);a==b?$(g).hide():$(g).show()}}),$(".toggle-readonly").each(function(){$(this).is(":checked")&&readOnly($("."+$(this).attr("toggleElement")))}),$(".toggle-readonly-reverse").each(function(){$(this).is(":checked")||readOnly($("."+$(this).attr("toggleElement")))}),$(".switch-radio input:radio").each(function(){$(this).is(":checked")?$("#"+$(this).attr("switchElement")).removeClass("hidn"):$("#"+$(this).attr("switchElement")).addClass("hidn")}),$(".typing-check").each(function(){""==$.trim($(this).val())?disable($("#"+$(this).attr("target"))):enable($("#"+$(this).attr("target")))}),$("form").attr("novalidate","novalidate")}var $CT_CONFIRM_NODE=!1,CT_LOADING_IMG="";"undefined"!=typeof CT_WEB_ROOT&&(CT_LOADING_IMG='<img src="'+CT_WEB_ROOT+CT_ROUTER_NAME+'/img/loading.gif" />');var CT_ACTIVE_AJAX=!1;$(document).ready(function(){loadDefaults(),CT_TEXT=parseJson(CT_TEXT),$(document).on("click",".checkbox-child",function(a){var b=$(this).parents(".checkbox-group"),c=$(this).parents("tr"),d="";$(this).attr("grpid")&&(d='[grpid="'+$(this).attr("grpid")+'"]'),$(this).is(":checked")?(c.addClass("selected"),b.find(".checkbox-child"+d).length==b.find(".checkbox-child:checked"+d).length?(b.find(".checkbox-parent"+d).prop("indeterminate",!1),b.find(".checkbox-parent"+d).prop("checked","checked")):b.find(".checkbox-parent"+d).prop("indeterminate",!0)):(c.removeClass("selected"),b.find(".checkbox-parent"+d).removeAttr("checked"),b.find(".checkbox-child:checked"+d).length>0?b.find(".checkbox-parent"+d).prop("indeterminate",!0):b.find(".checkbox-parent"+d).prop("indeterminate",!1)),a.stopPropagation()}),$(document).on("click",".checkbox-parent",function(a){var b=$(this).parents(".checkbox-group"),c="";$(this).attr("grpid")&&(c='[grpid="'+$(this).attr("grpid")+'"]'),$(this).is(":checked")?(b.find(".checkbox-child"+c).prop("checked","checked"),b.find("tr").addClass("selected")):(b.find(".checkbox-child"+c).removeAttr("checked"),b.find("tr").removeClass("selected")),a.stopPropagation()}),$(document).on("submit","form",function(){$(this).find('input[type="submit"]').addClass("disabled");var a=$(this).find('input[type="submit"]').attr("data-loading-text");a&&$(this).find('input[type="submit"]').val(a)}),$(document).bind("ajaxStart",function(){CT_ACTIVE_AJAX=!0}),$(document).bind("ajaxSend",function(a,b,c){"undefined"!=typeof CT_CSRF_TOKEN&&b.setRequestHeader("CSRF-TOKEN",CT_CSRF_TOKEN)}),$(document).ajaxError(function(b,c,d,e){CT_ACTIVE_AJAX=!1}),$(document).bind("ajaxComplete",function(){CT_ACTIVE_AJAX=!1,$('form input[type="submit"]').removeClass("disabled")}),$(document).on("click",".disabled",function(){return!1}),$(document).on("keyup",".typing-check",function(a){""==$.trim($(this).val())?disable($("#"+$(this).attr("target"))):(enable($("#"+$(this).attr("target"))),$(document).on("click",".fake-link",function(a){return a.preventDefault(),!1}))}),$(document).on("change",".switch-radio input:radio",function(){if($(".switch-box .switch-content").addClass("hidn"),$("#"+$(this).attr("switchElement")).removeClass("hidn"),$(".switch-box").attr("callback")){var a=$(".switch-box").attr("callback");caller(a)}}),$(document).on("click",".signup-captcha-change",function(a){a.stopPropagation();var b=$("#signupCaptchaImg").attr("src"),c=b.split("/");return c[c.length-1]=militime(),$("#signupCaptchaImg").attr("src",c.join("/")),$("#signupCaptchaImg").addClass("vis-hidden"),$("#signupCaptchaImg").before('<span id="signupCaptchaLoading">'+CT_LOADING_IMG+"</span>"),$("#signupCaptchaImg").on("load",function(){$("#signupCaptchaImg").removeClass("vis-hidden"),$("#signupCaptchaLoading").remove()}),!1}),$(document).on("change",".toggle-btn",function(){$(this).is(":checked")?enable($("#"+$(this).attr("toggleBtn"))):disable($("#"+$(this).attr("toggleBtn")))}),$(document).on("click","table .tr-toggle td:not(.not-tr-toggle)",function(){var a=$(this).parent().attr("trtoggleid");$(".tr-collapse").not("#"+a).addClass("hidn"),$("#"+a).toggleClass("hidn")}),$(document).on("change",'input[type="checkbox"].toggle-box',function(){var a=$(this).attr("target"),b=$(this).attr("rtarget");$(this).is(":checked")?($("."+a).removeClass("hidn"),b&&($("."+b).addClass("hidn"),$(this).attr("rkeep")||$("."+b).find('input:not(:checkbox):not(:radio):not([type="hidden"]), select').val(""))):($("."+a).addClass("hidn"),$(this).attr("keep")||$("."+a).find('input:not(:checkbox):not(:radio):not([type="hidden"]), select').val(""),b&&$("."+b).removeClass("hidn"))}),$(document).on("click","div.toggle-box, span.toggle-box, a.toggle-box, button.toggle-box, .toggle-box:header",function(){var a=$(this).attr("target"),b=$(this).html(),c=$(this).attr("txt");$(this).html(c),$(this).attr("txt",b),$("."+a).is(":visible")?$("."+a).hide():$("."+a).show()}),$(document).on("change",'input[type="checkbox"].toggle-box-reverse',function(){var a=$(this).attr("target"),b=$(this).attr("rtarget");$(this).is(":checked")?($(this).attr("keep")||$("."+a).find('input:not(:checkbox):not(:radio):not([type="hidden"]), select').val(""),$("."+a).addClass("hidn"),b&&$("."+b).removeClass("hidn")):($("."+a).removeClass("hidn"),b&&($("."+b).addClass("hidn"),$(this).attr("rkeep")||$("."+b).find('input:not(:checkbox):not(:radio):not([type="hidden"]), select').val("")))}),$(document).on("change","select.toggle-box",function(){var a=$(this).val(),b=$(this).attr("_val"),c=$(this).attr("show"),d=$(this).attr("hide");if(c)for(var e=c.split(","),f=0;f<e.length;f++){var g=$.trim(e[f]);a==b?$(g).show():$(g).hide()}if(d)for(var h=d.split(","),f=0;f<h.length;f++){var g=$.trim(h[f]);a==b?$(g).hide():$(g).show()}}),$(document).on("change",'input[type="checkbox"].toggle-readonly',function(){var a=$(this).attr("toggleElement");$(this).is(":checked")?readOnly($("."+a)):unReadOnly($("."+a))}),$(document).on("change",'input[type="checkbox"].toggle-readonly-reverse',function(){var a=$(this).attr("toggleElement");$(this).is(":checked")?$("."+a).removeAttr("readonly"):$("."+a).attr("readonly","readonly")}),$(document).on("dragstart",".no-drag",function(a){return!1}),$(document).on("change",".loading-parent",function(){var a=$(this).val(),b=$("#"+$(this).attr("target"));b.html("<option>"+CT_TEXT.select_loading+"</option>"),b.load($(this).attr("url")+a,function(){})}),$(document).on("dragstart",".no-drag",function(a){return!1}),$(document).on("click",".jsa",function(){var a=$(this).attr("jsref"),b=$(this).attr("target");a&&(b?window.open(a,b):window.location=a)}),$(document).on("focus",'input[type="text"][readonly="readonly"]',function(){$(this).blur()})});